<div class="forgot-password auth-content">
  <div class="form">
    <a class="form__link form__link--back" routerLink="/login">
      <i class="pi pi-arrow-left"></i>
      返回登入
    </a>
  </div>

  <header class="auth-content__header">
    <p class="auth-content__badge">管理系統</p>
    <h1 class="auth-content__title">忘記密碼</h1>
    <p class="auth-content__subtitle">輸入您的 Email，我們將寄送重設連結</p>
  </header>

  @if (sent()) {
    <div class="message message--success">
      <i class="pi pi-check-circle"></i>
      重設連結已寄送，請查收信箱
    </div>
    <p class="auth-content__hint">若您沒有提供 Email，請直接聯繫管理員重設密碼。</p>
  } @else {
    <form class="form" (ngSubmit)="onSubmit()">
      @if (error()) {
        <div class="message message--error">
          <i class="pi pi-exclamation-circle"></i>
          {{ error() }}
        </div>
      }

      <div class="form__field">
        <label class="form__label" for="email">Email</label>
        <input
          id="email"
          type="email"
          class="form__input"
          placeholder="輸入您的 Email"
          [(ngModel)]="email"
          name="email"
          required
          autocomplete="email"
        />
      </div>


      <div #turnstileContainer class="mb-4"></div>

      <button type="submit" class="form__submit" [disabled]="submitting() || !email">
        @if (submitting()) {
          <i class="pi pi-spinner pi-spin"></i>
          寄送中...
        } @else {
          <i class="pi pi-send"></i>
          寄送重設連結
        }
      </button>
    </form>

    <p class="auth-content__hint">沒有 Email 帳號？請聯繫管理員重設密碼。</p>
  }
</div>

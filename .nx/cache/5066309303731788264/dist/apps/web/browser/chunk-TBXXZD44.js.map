{
  "version": 3,
  "sources": ["apps/web/src/app/core/captcha.service.ts"],
  "sourcesContent": ["import { Injectable, signal } from '@angular/core';\n\n@Injectable({ providedIn: 'root' })\nexport class CaptchaService {\n  private scriptLoaded = signal(false);\n\n  constructor() {\n    this.loadScript();\n  }\n\n  private loadScript() {\n    if (this.scriptLoaded()) return;\n\n    const script = document.createElement('script');\n    script.src = 'https://challenges.cloudflare.com/turnstile/v0/api.js';\n    script.async = true;\n    script.defer = true;\n    script.onload = () => this.scriptLoaded.set(true);\n    document.head.appendChild(script);\n  }\n\n  render(\n    container: HTMLElement,\n    siteKey: string,\n    callback: (token: string) => void,\n    options: any = {},\n  ): string | undefined {\n    if (!this.scriptLoaded()) {\n      // Retry after script load\n      const interval = setInterval(() => {\n        if (this.scriptLoaded()) {\n          clearInterval(interval);\n          this.render(container, siteKey, callback, options);\n        }\n      }, 100);\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (window as any).turnstile?.render(container, {\n      sitekey: siteKey,\n      callback: callback,\n      ...options,\n    });\n  }\n\n  reset(widgetId: string) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).turnstile?.reset(widgetId);\n  }\n}\n"],
  "mappings": ";;;;;;;;;AAGM,IAAO,iBAAP,MAAO,gBAAc;EACjB,eAAe,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,eAAA,CAAA,IAAA,CAAA,CAAA;EAEnC,cAAA;AACE,SAAK,WAAU;EACjB;EAEQ,aAAU;AAChB,QAAI,KAAK,aAAY;AAAI;AAEzB,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,MAAM;AACb,WAAO,QAAQ;AACf,WAAO,QAAQ;AACf,WAAO,SAAS,MAAM,KAAK,aAAa,IAAI,IAAI;AAChD,aAAS,KAAK,YAAY,MAAM;EAClC;EAEA,OACE,WACA,SACA,UACA,UAAe,CAAA,GAAE;AAEjB,QAAI,CAAC,KAAK,aAAY,GAAI;AAExB,YAAM,WAAW,YAAY,MAAK;AAChC,YAAI,KAAK,aAAY,GAAI;AACvB,wBAAc,QAAQ;AACtB,eAAK,OAAO,WAAW,SAAS,UAAU,OAAO;QACnD;MACF,GAAG,GAAG;AACN;IACF;AAGA,WAAQ,OAAe,WAAW,OAAO,WAAW;MAClD,SAAS;MACT;OACG,QACJ;EACH;EAEA,MAAM,UAAgB;AAEnB,WAAe,WAAW,MAAM,QAAQ;EAC3C;;qCA9CW,iBAAc;EAAA;4EAAd,iBAAc,SAAd,gBAAc,WAAA,YADD,OAAM,CAAA;;;sEACnB,gBAAc,CAAA;UAD1B;WAAW,EAAE,YAAY,OAAM,CAAE;;;",
  "names": []
}

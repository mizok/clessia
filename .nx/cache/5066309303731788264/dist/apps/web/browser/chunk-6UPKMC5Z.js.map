{
  "version": 3,
  "sources": ["apps/web/src/app/features/public/pages/forgot-password/forgot-password.component.ts", "apps/web/src/app/features/public/pages/forgot-password/forgot-password.component.html"],
  "sourcesContent": ["import { Component, ElementRef, ViewChild, signal, AfterViewInit } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport { AuthService } from '@core/auth.service';\nimport { CaptchaService } from '@core/captcha.service';\nimport { environment } from '@env/environment';\n\n@Component({\n  selector: 'app-forgot-password',\n  imports: [FormsModule, RouterLink],\n  templateUrl: './forgot-password.component.html',\n  styleUrl: './forgot-password.component.scss',\n  host: { class: 'u-centered-flex' },\n})\nexport class ForgotPasswordComponent implements AfterViewInit {\n  @ViewChild('turnstileContainer') turnstileContainer!: ElementRef;\n\n  email = '';\n  submitting = signal(false);\n  sent = signal(false);\n  error = signal<string | null>(null);\n  captchaToken = signal<string | null>(null);\n\n  constructor(\n    private readonly auth: AuthService,\n    private readonly captcha: CaptchaService,\n  ) {}\n\n  ngAfterViewInit() {\n    this.captcha.render(\n      this.turnstileContainer.nativeElement,\n      environment.turnstileSiteKey,\n      (token) => {\n        this.captchaToken.set(token);\n      },\n      {\n        appearance: 'always',\n        size: 'invisible',\n      },\n    );\n  }\n\n  async onSubmit() {\n    this.error.set(null);\n    this.submitting.set(true);\n\n    if (!this.captchaToken()) {\n      this.error.set('請完成機器人驗證');\n      this.submitting.set(false);\n      return;\n    }\n\n    const errorMsg = await this.auth.sendPasswordReset(this.email, this.captchaToken()!);\n    this.submitting.set(false);\n\n    if (errorMsg) {\n      this.error.set(errorMsg);\n      return;\n    }\n\n    this.sent.set(true);\n  }\n}\n", "<div class=\"forgot-password auth-content\">\n  <div class=\"form\">\n    <a class=\"form__link form__link--back\" routerLink=\"/login\">\n      <i class=\"pi pi-arrow-left\"></i>\n      返回登入\n    </a>\n  </div>\n\n  <header class=\"auth-content__header\">\n    <p class=\"auth-content__badge\">管理系統</p>\n    <h1 class=\"auth-content__title\">忘記密碼</h1>\n    <p class=\"auth-content__subtitle\">輸入您的 Email，我們將寄送重設連結</p>\n  </header>\n\n  @if (sent()) {\n    <div class=\"message message--success\">\n      <i class=\"pi pi-check-circle\"></i>\n      重設連結已寄送，請查收信箱\n    </div>\n    <p class=\"auth-content__hint\">若您沒有提供 Email，請直接聯繫管理員重設密碼。</p>\n  } @else {\n    <form class=\"form\" (ngSubmit)=\"onSubmit()\">\n      @if (error()) {\n        <div class=\"message message--error\">\n          <i class=\"pi pi-exclamation-circle\"></i>\n          {{ error() }}\n        </div>\n      }\n\n      <div class=\"form__field\">\n        <label class=\"form__label\" for=\"email\">Email</label>\n        <input\n          id=\"email\"\n          type=\"email\"\n          class=\"form__input\"\n          placeholder=\"輸入您的 Email\"\n          [(ngModel)]=\"email\"\n          name=\"email\"\n          required\n          autocomplete=\"email\"\n        />\n      </div>\n\n\n      <div #turnstileContainer class=\"mb-4\"></div>\n\n      <button type=\"submit\" class=\"form__submit\" [disabled]=\"submitting() || !email\">\n        @if (submitting()) {\n          <i class=\"pi pi-spinner pi-spin\"></i>\n          寄送中...\n        } @else {\n          <i class=\"pi pi-send\"></i>\n          寄送重設連結\n        }\n      </button>\n    </form>\n\n    <p class=\"auth-content__hint\">沒有 Email 帳號？請聯繫管理員重設密碼。</p>\n  }\n</div>\n"],
  "mappings": "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",
  "names": []
}

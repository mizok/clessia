{
  "version": 3,
  "sources": ["apps/web/src/app/features/public/pages/change-password/change-password.component.ts", "apps/web/src/app/features/public/pages/change-password/change-password.component.html"],
  "sourcesContent": ["import { Component, signal, inject } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from '@core/auth.service';\n\n@Component({\n  selector: 'app-change-password',\n  standalone: true,\n  imports: [FormsModule],\n  templateUrl: './change-password.component.html',\n  styleUrl: './change-password.component.scss',\n  host: { class: 'u-centered-flex' },\n})\nexport class ChangePasswordComponent {\n  private readonly auth = inject(AuthService);\n  private readonly router = inject(Router);\n\n  newPassword = '';\n  confirmPassword = '';\n  submitting = signal(false);\n  error = signal<string | null>(null);\n  success = signal(false);\n\n  async onSubmit() {\n    if (!this.newPassword) {\n      this.error.set('請輸入新密碼');\n      return;\n    }\n\n    if (this.newPassword !== this.confirmPassword) {\n      this.error.set('兩次輸入的密碼不一致');\n      return;\n    }\n\n    if (this.newPassword.length < 6) {\n      this.error.set('密碼長度至少需要 6 位元組');\n      return;\n    }\n\n    this.error.set(null);\n    this.submitting.set(true);\n\n    try {\n      const errorMsg = await this.auth.updatePassword(this.newPassword);\n      if (errorMsg) {\n        this.error.set(errorMsg);\n      } else {\n        this.success.set(true);\n        // Navigate back after 2 seconds\n        setTimeout(() => {\n          this.goBack();\n        }, 2000);\n      }\n    } catch (e) {\n      this.error.set('發生未知錯誤，請重試');\n    } finally {\n      this.submitting.set(false);\n    }\n  }\n\n  goBack() {\n    // Navigate back to the active role's shell\n    const role = this.auth.activeRole();\n    if (role) {\n      this.router.navigate([`/${role}`]);\n    } else {\n      this.router.navigate(['/select-role']);\n    }\n  }\n}\n", "<div class=\"change-password change-password-page\">\n  <div class=\"auth-content\">\n    <header class=\"auth-content__header\">\n      <p class=\"auth-content__badge\">帳號安全</p>\n      <h1 class=\"auth-content__title\">修改密碼</h1>\n      <p class=\"auth-content__subtitle\">請輸入您的新密碼，確保帳號安全。</p>\n    </header>\n\n    @if (success()) {\n      <div class=\"message message--success\">\n        <i class=\"pi pi-check-circle\"></i>\n        <span>密碼修改成功！即將跳回首頁...</span>\n      </div>\n    } @else {\n      <form (ngSubmit)=\"onSubmit()\" #passwordForm=\"ngForm\" class=\"form\">\n        @if (error()) {\n          <div class=\"message message--error\">\n            <i class=\"pi pi-exclamation-circle\"></i>\n            <span>{{ error() }}</span>\n          </div>\n        }\n\n        <div class=\"form__field\">\n          <label class=\"form__label\" for=\"newPassword\">新密碼</label>\n          <input\n            type=\"password\"\n            id=\"newPassword\"\n            class=\"form__input\"\n            name=\"newPassword\"\n            [(ngModel)]=\"newPassword\"\n            placeholder=\"至少 6 位元組\"\n            required\n            #newPassModel=\"ngModel\"\n          />\n        </div>\n\n        <div class=\"form__field\">\n          <label class=\"form__label\" for=\"confirmPassword\">確認新密碼</label>\n          <input\n            type=\"password\"\n            id=\"confirmPassword\"\n            class=\"form__input\"\n            name=\"confirmPassword\"\n            [(ngModel)]=\"confirmPassword\"\n            placeholder=\"請再次輸入新密碼\"\n            required\n            #confirmPassModel=\"ngModel\"\n          />\n        </div>\n\n        <div class=\"form__row\" style=\"justify-content: flex-end; gap: var(--space-3);\">\n          <button\n            type=\"button\"\n            class=\"form__submit\"\n            style=\"background: var(--zinc-200); color: var(--zinc-700); width: auto; padding: var(--space-2) var(--space-6);\"\n            (click)=\"goBack()\"\n            [disabled]=\"submitting()\"\n          >\n            取消\n          </button>\n          <button\n            type=\"submit\"\n            class=\"form__submit\"\n            style=\"width: auto; padding: var(--space-2) var(--space-8);\"\n            [disabled]=\"submitting() || !passwordForm.valid\"\n          >\n            @if (submitting()) {\n              <i class=\"pi pi-spin pi-spinner\"></i>\n              處理中...\n            } @else {\n              確認修改\n            }\n          </button>\n        </div>\n      </form>\n    }\n  </div>\n</div>\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACSM,IAAA,yBAAA,GAAA,OAAA,CAAA;AACE,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,yBAAA,GAAA,MAAA;AAAM,IAAA,iBAAA,GAAA,mFAAA;AAAgB,IAAA,uBAAA,EAAO;;;;;AAK3B,IAAA,yBAAA,GAAA,OAAA,EAAA;AACE,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,yBAAA,GAAA,MAAA;AAAM,IAAA,iBAAA,CAAA;AAAa,IAAA,uBAAA,EAAO;;;;AAApB,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,OAAA,MAAA,CAAA;;;;;AAiDJ,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,iBAAA,GAAA,yBAAA;;;;;AAEA,IAAA,iBAAA,GAAA,4BAAA;;;;;;AAxDR,IAAA,yBAAA,GAAA,QAAA,IAAA,CAAA;AAAM,IAAA,qBAAA,YAAA,SAAA,2EAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAY,OAAA,SAAA,CAAU;IAAA,CAAA;AAC1B,IAAA,8BAAA,GAAA,+DAAA,GAAA,GAAA,OAAA,EAAA;AAOA,IAAA,yBAAA,GAAA,OAAA,EAAA,EAAyB,GAAA,SAAA,EAAA;AACsB,IAAA,iBAAA,GAAA,oBAAA;AAAG,IAAA,uBAAA;AAChD,IAAA,yBAAA,GAAA,SAAA,IAAA,CAAA;AAKE,IAAA,2BAAA,iBAAA,SAAA,+EAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAA,OAAA,aAAA,MAAA,MAAA,OAAA,cAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AALF,IAAA,uBAAA,EASE;AAGJ,IAAA,yBAAA,GAAA,OAAA,EAAA,EAAyB,GAAA,SAAA,EAAA;AAC0B,IAAA,iBAAA,IAAA,gCAAA;AAAK,IAAA,uBAAA;AACtD,IAAA,yBAAA,IAAA,SAAA,IAAA,CAAA;AAKE,IAAA,2BAAA,iBAAA,SAAA,gFAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAA,OAAA,iBAAA,MAAA,MAAA,OAAA,kBAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AALF,IAAA,uBAAA,EASE;AAGJ,IAAA,yBAAA,IAAA,OAAA,EAAA,EAA+E,IAAA,UAAA,EAAA;AAK3E,IAAA,qBAAA,SAAA,SAAA,2EAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,OAAA,CAAQ;IAAA,CAAA;AAGjB,IAAA,iBAAA,IAAA,gBAAA;AACF,IAAA,uBAAA;AACA,IAAA,yBAAA,IAAA,UAAA,EAAA;AAME,IAAA,8BAAA,IAAA,gEAAA,GAAA,CAAA,EAAoB,IAAA,gEAAA,GAAA,CAAA;AAMtB,IAAA,uBAAA,EAAS,EACL;;;;;AA1DN,IAAA,oBAAA,CAAA;AAAA,IAAA,wBAAA,OAAA,MAAA,IAAA,IAAA,EAAA;AAcI,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,WAAA;AAcA,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,eAAA;AAaA,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,YAAA,OAAA,WAAA,CAAA;AAQA,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,YAAA,OAAA,WAAA,KAAA,CAAA,gBAAA,KAAA;AAEA,IAAA,oBAAA;AAAA,IAAA,wBAAA,OAAA,WAAA,IAAA,KAAA,EAAA;;;ADrDN,IAAO,0BAAP,MAAO,yBAAuB;EACjB,OAAO,OAAO,WAAW;EACzB,SAAS,OAAO,MAAM;EAEvC,cAAc;EACd,kBAAkB;EAClB,aAAa,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,aAAA,CAAA,IAAA,CAAA,CAAA;EACzB,QAAQ,OAAsB,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,QAAA,CAAA,IAAA,CAAA,CAAA;EAClC,UAAU,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EAEtB,MAAM,WAAQ;AACZ,QAAI,CAAC,KAAK,aAAa;AACrB,WAAK,MAAM,IAAI,sCAAQ;AACvB;IACF;AAEA,QAAI,KAAK,gBAAgB,KAAK,iBAAiB;AAC7C,WAAK,MAAM,IAAI,8DAAY;AAC3B;IACF;AAEA,QAAI,KAAK,YAAY,SAAS,GAAG;AAC/B,WAAK,MAAM,IAAI,uEAAgB;AAC/B;IACF;AAEA,SAAK,MAAM,IAAI,IAAI;AACnB,SAAK,WAAW,IAAI,IAAI;AAExB,QAAI;AACF,YAAM,WAAW,MAAM,KAAK,KAAK,eAAe,KAAK,WAAW;AAChE,UAAI,UAAU;AACZ,aAAK,MAAM,IAAI,QAAQ;MACzB,OAAO;AACL,aAAK,QAAQ,IAAI,IAAI;AAErB,mBAAW,MAAK;AACd,eAAK,OAAM;QACb,GAAG,GAAI;MACT;IACF,SAAS,GAAG;AACV,WAAK,MAAM,IAAI,8DAAY;IAC7B;AACE,WAAK,WAAW,IAAI,KAAK;IAC3B;EACF;EAEA,SAAM;AAEJ,UAAM,OAAO,KAAK,KAAK,WAAU;AACjC,QAAI,MAAM;AACR,WAAK,OAAO,SAAS,CAAC,IAAI,IAAI,EAAE,CAAC;IACnC,OAAO;AACL,WAAK,OAAO,SAAS,CAAC,cAAc,CAAC;IACvC;EACF;;qCAvDW,0BAAuB;EAAA;yEAAvB,0BAAuB,WAAA,CAAA,CAAA,qBAAA,CAAA,GAAA,WAAA,CAAA,GAAA,iBAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,gBAAA,QAAA,GAAA,CAAA,gBAAA,SAAA,GAAA,CAAA,oBAAA,SAAA,GAAA,CAAA,GAAA,mBAAA,sBAAA,GAAA,CAAA,GAAA,cAAA,GAAA,CAAA,GAAA,sBAAA,GAAA,CAAA,GAAA,qBAAA,GAAA,CAAA,GAAA,qBAAA,GAAA,CAAA,GAAA,wBAAA,GAAA,CAAA,GAAA,WAAA,kBAAA,GAAA,CAAA,GAAA,MAAA,GAAA,CAAA,GAAA,MAAA,iBAAA,GAAA,CAAA,GAAA,QAAA,GAAA,UAAA,GAAA,CAAA,GAAA,WAAA,gBAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,OAAA,eAAA,GAAA,aAAA,GAAA,CAAA,QAAA,YAAA,MAAA,eAAA,QAAA,eAAA,eAAA,qCAAA,YAAA,IAAA,GAAA,eAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,OAAA,mBAAA,GAAA,aAAA,GAAA,CAAA,QAAA,YAAA,MAAA,mBAAA,QAAA,mBAAA,eAAA,oDAAA,YAAA,IAAA,GAAA,eAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,GAAA,aAAA,GAAA,mBAAA,YAAA,OAAA,gBAAA,GAAA,CAAA,QAAA,UAAA,GAAA,gBAAA,GAAA,cAAA,mBAAA,SAAA,mBAAA,SAAA,QAAA,WAAA,iCAAA,GAAA,SAAA,UAAA,GAAA,CAAA,QAAA,UAAA,GAAA,gBAAA,GAAA,SAAA,QAAA,WAAA,iCAAA,GAAA,UAAA,GAAA,CAAA,GAAA,MAAA,uBAAA,GAAA,CAAA,GAAA,MAAA,WAAA,YAAA,CAAA,GAAA,UAAA,SAAA,iCAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;ACbpC,MAAA,yBAAA,GAAA,OAAA,CAAA,EAAkD,GAAA,OAAA,CAAA,EACtB,GAAA,UAAA,CAAA,EACa,GAAA,KAAA,CAAA;AACJ,MAAA,iBAAA,GAAA,0BAAA;AAAI,MAAA,uBAAA;AACnC,MAAA,yBAAA,GAAA,MAAA,CAAA;AAAgC,MAAA,iBAAA,GAAA,0BAAA;AAAI,MAAA,uBAAA;AACpC,MAAA,yBAAA,GAAA,KAAA,CAAA;AAAkC,MAAA,iBAAA,GAAA,kGAAA;AAAgB,MAAA,uBAAA,EAAI;AAGxD,MAAA,8BAAA,GAAA,gDAAA,GAAA,GAAA,OAAA,CAAA,EAAiB,IAAA,iDAAA,IAAA,GAAA,QAAA,EAAA;AAoEnB,MAAA,uBAAA,EAAM;;;AApEJ,MAAA,oBAAA,CAAA;AAAA,MAAA,wBAAA,IAAA,QAAA,IAAA,IAAA,EAAA;;oBDAQ,aAAW,oBAAA,sBAAA,iBAAA,sBAAA,mBAAA,SAAA,MAAA,GAAA,QAAA,CAAA,2qIAAA,EAAA,CAAA;;;sEAKV,yBAAuB,CAAA;UARnC;uBACW,uBAAqB,YACnB,MAAI,SACP,CAAC,WAAW,GAAC,MAGhB,EAAE,OAAO,kBAAiB,GAAE,UAAA,0wFAAA,QAAA,CAAA,mwHAAA,EAAA,CAAA;;;;6EAEvB,yBAAuB,EAAA,WAAA,2BAAA,UAAA,uFAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}

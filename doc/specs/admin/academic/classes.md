# 課程管理

**路徑**: `/admin/classes`
**角色**: Admin
**分組**: 教務管理

## 核心目的

管理開課班，設定上課時間，產生課堂。

## MVP 功能

### 開課班列表

- 篩選：分校、課程、狀態
- 每筆顯示：開課班名稱、分校、課程、上課時間摘要、目前人數/上限、狀態
- 點擊展開詳情或進入編輯

### 開課班詳情展開

- 上課時間列表（每個時段的時間、老師）
- 學生名單摘要（人數、可展開查看）
- 快速操作：編輯、產生課堂、停用

### 新增/編輯開課班 Popup

**基本資訊**

| 欄位       | 類型     | 必填 | 說明                     |
| ---------- | -------- | ---- | ------------------------ |
| 開課班名稱 | 文字     | 是   | 例如：國一數學 A 班      |
| 分校       | 下拉選單 | 是   | 選擇所屬分校             |
| 課程       | 下拉選單 | 是   | 選擇關聯課程             |
| 人數上限   | 數字     | 是   | 例如：20                 |
| 適用年級   | 多選     | 否   | 篩選推薦給家長的課程     |
| 推薦加選   | 開關     | 否   | 優先顯示在家長首頁       |
| 下一階班級 | 下拉選單 | 否   | 升班路徑（如國一升國二） |
| 狀態       | 開關     | 是   | 啟用/停用                |

**上課時間設定**

| 欄位       | 類型     | 必填 | 說明               |
| ---------- | -------- | ---- | ------------------ |
| 星期       | 下拉選單 | 是   | 週一～週日         |
| 開始時間   | 時間選擇 | 是   | 例如：19:00        |
| 結束時間   | 時間選擇 | 是   | 例如：21:00        |
| 任課老師   | 下拉選單 | 是   | 選擇老師           |
| 教室       | 下拉選單 | 否   | 選擇教室           |
| 生效起始日 | 日期選擇 | 是   | 這個時段從何時開始 |
| 生效結束日 | 日期選擇 | 否   | 留空表示持續有效   |

- 可新增多個上課時段
- 每個時段可獨立編輯或刪除

### 產生課堂功能

1. 點擊「產生課堂」按鈕
2. 選擇日期範圍（起始日、結束日）
3. 系統預覽將產生的課堂列表
4. 確認後批次建立課堂

## 資料依賴

| 操作 | 資料表                                                                  |
| ---- | ----------------------------------------------------------------------- |
| 讀取 | `classes`, `schedules`, `courses`, `campuses`, `teachers`, `classrooms` |
| 寫入 | `classes`, `schedules`, `sessions`                                      |

## PRD 參考

- 4.3 開課班
- 4.4 上課時間
- 7.6 管理員專屬頁面

## 實作註記

- 產生課堂需預覽確認，避免重複建立
- 只會產生上課時間「生效期間」內的課堂
- 已存在的課堂不會重複建立

# 人員管理

**路徑**: `/admin/staff`
**角色**: Admin（需 manage_staff 權限）
**分組**: 系統設定

## 核心目的

管理管理員、老師帳號。

## MVP 功能

### 人員列表

- 篩選：姓名搜尋、角色、服務分校
- 每筆顯示：姓名、角色標籤、服務分校、電話、帳號狀態
- 點擊進入編輯

### 新增/編輯人員 Popup

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 姓名 | 文字 | 是 | |
| 角色 | 下拉選單 | 是 | 管理員/老師 |
| 服務分校 | 多選 | 是 | 可選擇多個分校 |
| 教學科目 | 多選 | 老師必填 | 國文/英文/數學/自然/社會/其他 |
| 電話 | 文字 | 是 | |
| Email | 文字 | 是 | 作為登入帳號 |
| 生日 | 日期 | 否 | |
| 備註 | 長文字 | 否 | |
| 帳號狀態 | 開關 | 是 | 啟用/停用 |

### 建立帳號流程（Better Auth）

- 透過 Better Auth admin API `createUser` 建立員工帳號，系統自動產生初始密碼
- 初始密碼由管理者告知員工

### 權限設定（管理員角色）

建立管理員帳號時可勾選權限：

| 權限標籤 | 說明 |
|----------|------|
| basic_operations | 查詢與處理日常行政（報名、出勤、請假） |
| manage_courses | 課程與排課管理 |
| manage_students | 學生與家長資料管理 |
| manage_finance | 財務與收費管理 |
| manage_staff | 系統帳號與權限管理 |
| view_reports | 查看營收與統計報表 |

## 資料依賴

| 操作 | 資料表 |
|------|--------|
| 讀取 | `staff`, `admin_permissions`, `campuses` |
| 寫入 | `staff`, `admin_permissions`, `ba_user` |

## PRD 參考

- 5.4 系統管理員
- 7.6 管理員專屬頁面

## 實作註記

- manage_staff 權限者才能指派他人權限
- 不可指派權限給已有 manage_staff 權限的人（避免權限無限擴張）

# 考試管理

**路徑**: `/teacher/assessments`
**角色**: Teacher

## 核心目的

建立考試事件、輸入成績。

## MVP 功能

### 分頁設計

- **待處理分頁**（預設）：只顯示尚未完成成績登錄的考試
- **全部分頁**：顯示所有考試，可篩選課程、日期範圍

### 考試列表

- 每筆顯示：考試名稱、課程、日期、完成狀態、進度（例如「8/10 已登錄」）
- 待處理的考試卡片右側顯示暖銅橘小圓點（●）
- 點擊開啟「成績輸入 Popup」

### 完成狀態邏輯

- **自動完成**：所有學生都已輸入分數或標記缺考
- **手動完成**：老師可點擊「標記完成」強制完成
- 已完成的考試仍可編輯成績

### 建立考試流程

1. 點擊「新增考試」按鈕
2. 輸入考試名稱
3. 選擇課程歸屬
4. 選擇課堂關聯（可選，從自己的課堂中選）
5. 若無課堂關聯，輸入考試日期
6. 設定滿分（預設 100）和及格分數（預設 60）
7. 選擇參加範圍（樹狀結構多選開課班，僅顯示自己任課的班）
8. 儲存

### 成績輸入 Popup

- **Popup 標題**：考試名稱 + 日期
- **學生名單表格**：
  - 欄位：學生姓名、開課班、分數輸入框、狀態下拉（正常/缺考/補考）
  - 未輸入分數的學生行底色稍淡
- **操作按鈕**：
  - 「加入其他學生」
  - 「全部標記缺考」
  - 「下載範本」
  - 「匯入成績」
  - 「儲存」
  - 「儲存並關閉」
  - 「標記完成」

### 成績匯入功能

支援 CSV 和 Excel（.xlsx）格式

**匯入流程**：
1. 點擊「下載範本」
2. 範本內容：學生 ID、學生姓名、開課班、分數、狀態
3. 填寫分數欄位
4. 點擊「匯入成績」上傳
5. 系統預覽匹配結果
6. 確認後匯入

## 資料依賴

| 操作 | 資料表 |
|------|--------|
| 讀取 | `assessments`, `grades`, `sessions`, `classes`, `students`, `enrollments` |
| 寫入 | `assessments`, `grades` |

## PRD 參考

- 4.11 考試事件
- 4.12 成績
- 6.7 成績輸入流程
- 7.3 老師頁面

## 實作註記

- 成績匯入需以學生 ID 匹配
- MVP 不實作成績鎖定機制
